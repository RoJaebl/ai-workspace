---
name: task-planner
description: "사용자 메시지를 5단계 워크플로우 계획서로 변환"
category: workflow
complexity: enhanced
mcp-servers: [sequential, serena]
personas: [architect, analyzer]
---

# /sc:task-planner - 작업 계획 수립

> **5단계 워크플로우**: 사용자 메시지를 받아 확인→분석→계획→작업→검증 단계로 구조화된 작업 계획서를 자동 생성합니다.

## Triggers
- 작업 계획 수립이 필요할 때
- 체계적인 워크플로우 접근이 필요한 프로젝트
- 5단계 방법론 (확인/분석/계획/작업/검증) 적용이 필요할 때
- 작업을 시작하기 전 명확한 계획서가 필요할 때

## Usage
```
/sc:task-planner [user-message]
/sc:task-planner  # 메시지 없으면 대화형으로 질문
```

**인자:**
- `[user-message]`: 계획을 수립할 작업 내용 (선택사항)

**동작:**
- 인자가 있으면: 메시지를 바탕으로 즉시 계획서 작성
- 인자가 없으면: 사용자에게 작업 내용을 질문

## Behavioral Flow
1. **확인 (Confirm)**: 요구사항 명확화 및 컨텍스트 수집
   - 사용자 메시지 분석 및 핵심 요구사항 파악
   - 프로젝트 컨텍스트 및 제약사항 확인
   - 불명확한 부분이 있으면 추가 질문
   
2. **분석 (Analyze)**: 작업 범위, 의존성, 리스크 분석
   - Sequential MCP를 활용한 다단계 체계적 분석
   - Serena MCP로 프로젝트 구조 및 심볼 분석
   - 작업 범위, 필요 리소스, 잠재적 리스크 식별
   
3. **계획 (Plan)**: 단계별 실행 계획 및 체크리스트 작성
   - 실행 단계를 논리적 순서로 구조화
   - 각 단계별 체크리스트 및 마일스톤 정의
   - 우선순위 및 의존성 관계 명시
   
4. **작업 (Execute)**: 구체적인 액션 아이템 정의
   - 실행 가능한 구체적 작업 목록 생성
   - 각 작업의 담당자 및 우선순위 지정
   - TodoWrite로 주요 작업 항목 등록
   
5. **검증 (Validate)**: 성공 기준 및 검증 방법 명시
   - 각 단계별 성공 기준 정의
   - 테스트 및 검증 방법 명시
   - 품질 게이트 및 승인 프로세스 설정

Key behaviors:
- 5단계 방법론을 일관되게 적용하여 체계적 계획 수립
- MCP 통합으로 프로젝트 컨텍스트 기반 심층 분석
- 계획서를 화면에 출력하고 `.cursor/plans/` 디렉토리에 파일로 저장
- 주요 작업 항목은 TODO로 자동 등록하여 진행 관리

## MCP Integration
- **Sequential MCP**: 복잡한 작업을 다단계로 분해하고 체계적으로 분석
  - 작업 의존성 분석 및 순서 최적화
  - 각 단계별 상세 분석 및 검증
  
- **Serena MCP**: 프로젝트 메모리 및 심볼 분석으로 컨텍스트 파악
  - 프로젝트 구조 및 아키텍처 이해
  - 기존 코드 및 패턴 분석
  - 세션 간 컨텍스트 지속성 유지

## Tool Coordination
- **AskQuestion**: 인자 없이 실행 시 사용자에게 작업 내용 질문
- **Read**: 프로젝트 파일 및 컨텍스트 분석
- **Write**: `.cursor/plans/YYYYMMDD-HHMMSS-{title}.plan.md` 형식으로 계획서 저장
- **TodoWrite**: 주요 작업 항목을 TODO 리스트에 등록
- **Sequential MCP Tools**: 체계적 분석 및 계획 수립
- **Serena MCP Tools**: 프로젝트 컨텍스트 및 심볼 분석

## Key Patterns
- **5단계 워크플로우**: 확인 → 분석 → 계획 → 작업 → 검증 단계로 체계화
- **이중 출력**: 화면 출력 (마크다운) + 파일 저장 (`.cursor/plans/*.plan.md`)
- **TODO 통합**: 계획서의 주요 작업을 TODO 항목으로 자동 등록
- **컨텍스트 기반**: MCP 통합으로 프로젝트 구조를 반영한 현실적 계획 수립

## Examples

### 기본 사용 - 인라인 메시지
```
/sc:task-planner 사용자 인증 시스템 구축
# "사용자 인증 시스템 구축"을 5단계로 분석하여 계획서 작성
# 화면에 출력 + .cursor/plans/20260123-143022-user-auth-system.plan.md 저장
```

### 대화형 사용 - 메시지 없이 실행
```
/sc:task-planner
# → 질문: "어떤 작업의 계획을 수립하시겠습니까?"
# → 사용자 응답 후 계획서 작성
```

### 복잡한 프로젝트 - 여러 단계 계획
```
/sc:task-planner 마이크로서비스 아키텍처로 기존 모놀리식 시스템 마이그레이션
# Sequential MCP로 다단계 마이그레이션 전략 분석
# Serena MCP로 현재 시스템 구조 파악
# 상세한 단계별 계획 및 리스크 분석 포함
```

### 빠른 작업 - 간단한 작업 계획
```
/sc:task-planner API 문서 자동 생성 스크립트 작성
# 간단한 작업도 5단계로 구조화
# 누락 가능한 부분 (테스트, 검증) 명확히 정의
```

### 팀 협업 - 역할 분담 계획
```
/sc:task-planner 프론트엔드 성능 최적화 프로젝트
# Architect, Analyzer 페르소나 활성화
# 역할별 작업 분담 및 협업 포인트 명시
# TODO 항목으로 팀원별 할당 가능
```

## Boundaries

**Will:**
- 5단계 워크플로우를 적용하여 체계적인 계획서 자동 생성
- 프로젝트 컨텍스트를 반영한 현실적이고 실행 가능한 계획 수립
- 계획서를 화면 출력과 파일 저장으로 이중 제공
- 주요 작업 항목을 TODO로 등록하여 진행 관리 지원
- MCP 통합으로 심층 분석 및 컨텍스트 기반 계획 수립

**Will Not:**
- 계획서 없이 바로 작업을 실행하지 않음 (계획 먼저, 실행은 별도)
- 불완전하거나 검증되지 않은 계획을 승인하지 않음
- 사용자 확인 없이 프로젝트 파일을 수정하지 않음 (계획서만 생성)
- 지나치게 추상적이거나 실행 불가능한 계획을 제시하지 않음

---

## 내부 로직 (Claude 실행 가이드)

### 1단계: 사용자 메시지 수집

\`\`\`
IF $ARGUMENTS가 있으면:
  user_message = $ARGUMENTS
ELSE:
  AskQuestion 도구 사용:
  - 질문: "어떤 작업의 계획을 수립하시겠습니까?"
  - 답변을 user_message에 저장
\`\`\`

### 2단계: 5단계 워크플로우 적용

각 단계별로 다음 내용을 포함하여 계획서 작성:

**1️⃣ 확인 (Confirm)**
- 사용자가 요청한 작업의 핵심 요구사항
- 프로젝트 컨텍스트 (Serena MCP 활용)
- 명확히 해야 할 사항 또는 제약사항

**2️⃣ 분석 (Analyze)**
- 작업 범위 및 경계 정의
- 의존성 분석 (기술, 리소스, 타 작업)
- 잠재적 리스크 및 대응 방안
- 필요한 리소스 (인력, 도구, 시간)

**3️⃣ 계획 (Plan)**
- 단계별 실행 계획 (논리적 순서)
- 각 단계의 체크리스트
- 마일스톤 및 중간 목표

**4️⃣ 작업 (Execute)**
- 구체적인 액션 아이템 리스트
- 각 작업의 담당자 (필요 시)
- 우선순위 (High/Medium/Low)

**5️⃣ 검증 (Validate)**
- 각 단계별 성공 기준
- 테스트 및 검증 방법
- 품질 게이트 및 승인 프로세스

### 3단계: 계획서 출력

마크다운 형식으로 화면에 출력:

\`\`\`markdown
# [작업명] 계획서

생성일시: YYYY-MM-DD HH:MM:SS
작성자: Claude AI (task-planner)

## 1️⃣ 확인 (Confirm)
[내용]

## 2️⃣ 분석 (Analyze)
[내용]

## 3️⃣ 계획 (Plan)
[내용]

## 4️⃣ 작업 (Execute)
[내용]

## 5️⃣ 검증 (Validate)
[내용]

---
**다음 단계**: 이 계획을 검토하고 승인되면 작업을 시작하세요.
\`\`\`

### 4단계: 파일 저장

Write 도구 사용:
- 경로: `.cursor/plans/YYYYMMDD-HHMMSS-{sanitized-title}.plan.md`
- 파일명 생성 규칙:
  - 현재 시각을 YYYYMMDD-HHMMSS 형식으로
  - 작업명을 kebab-case로 변환 (공백 → 하이픈, 특수문자 제거)
  - 예: `20260123-143022-user-auth-system.plan.md`

### 5단계: TODO 항목 등록

TodoWrite 도구 사용:
- "4️⃣ 작업 (Execute)" 섹션의 주요 액션 아이템을 TODO로 등록
- 각 TODO에 적절한 상태 (pending) 및 우선순위 반영
- 최대 10개 항목까지 등록 (너무 많으면 핵심만 선택)

### 6단계: 최종 메시지

\`\`\`
✅ 계획서 작성 완료!

📄 **파일 저장**: `.cursor/plans/{filename}.plan.md`
📋 **TODO 등록**: {N}개 작업 항목 등록됨

**다음 단계**:
1. 계획서를 검토하고 필요시 수정
2. 계획이 승인되면 TODO 항목을 진행
3. 각 단계별 검증 기준을 확인하며 작업 진행
\`\`\`

---

**버전**: 1.0.0  
**최종 업데이트**: 2026-01-23  
**작성자**: SuperClaude Commands System
